<ion-content class="profile-container">
  <div class="profile-header">
    <h2>Mi Perfil</h2>
  </div>

  <div class="avatar-section">
    <div class="avatar-wrapper" (click)="editarActivo && toggleAvatarMenu()">
      <img [src]="selectedAvatarPath" alt="Avatar" class="avatar-img" />
    </div>

    <!-- Menú de avatares (solo visible en modo edición) -->
    <div class="avatar-menu" *ngIf="showAvatarMenu && editarActivo">
      <div
        *ngFor="let avatar of avatars"
        class="avatar-option"
        (click)="selectAvatar(avatar)"
      >
        <img [src]="avatar.path" [alt]="avatar.name" />
      </div>
    </div>
  </div>

  <div class="profile-info">
    <ion-item lines="none">
      <ion-label position="stacked">Nombre de Usuario</ion-label>
      <ion-input [(ngModel)]="nombre_usuario" [readonly]="!editarActivo"></ion-input>
    </ion-item>

    <ion-item lines="none">
      <ion-label position="stacked">Email</ion-label>
      <ion-input [(ngModel)]="email" readonly></ion-input>
    </ion-item>

    <ion-item lines="none">
      <ion-label position="stacked">Ubicación</ion-label>
      <ion-input [(ngModel)]="ubicacion" [readonly]="!editarActivo"></ion-input>
    </ion-item>
  </div>

  <div class="button-group">
    <!-- Botón Editar -->
    <ion-button
      *ngIf="!editarActivo"
      expand="block"
      color="primary"
      (click)="editarPerfil()"
    >
      Editar Perfil
    </ion-button>

    <!-- Botones Guardar / Cancelar -->
    <div *ngIf="editarActivo" class="edit-buttons">
      <ion-button expand="block" color="success" (click)="guardarCambios()">Guardar</ion-button>
      <ion-button expand="block" color="medium" (click)="cancelarEdicion()">Cancelar</ion-button>
    </div>

    <!-- Cerrar sesión -->
    <ion-button
      expand="block"
      color="danger"
      (click)="logout()"
      class="logout-btn"
    >
      Cerrar Sesión
    </ion-button>
  </div>
</ion-content>
